name: Notion Stock Price Update
on:
  schedule:
    - cron: "7 21 * * *"   # UTC 21:07 ≈ 北京时间 05:07（错峰）
  workflow_dispatch:
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-python@v4
      with: { python-version: "3.11" }
    - name: Install deps
      run: |
        python -m pip install --upgrade pip
        pip install requests python-dotenv yfinance
    - name: Run
      env:
        NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}
        NOTION_DATABASE_ID: ${{ secrets.NOTION_DATABASE_ID }}
        ALPHA_VANTAGE_KEY: ${{ secrets.ALPHA_VANTAGE_KEY }} # 可选
      run: python notion_price_update.py

